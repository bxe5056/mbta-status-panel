
//TODO implement day of week check
// -let-daysOfWeek = ['MONDAY', 'TUESDAY', 'WEDNESDAY', 'THURSDAY', 'FRIDAY', 'SATURDAY', 'SUNDAY']

export const trainList = {
    700   :{ direction: 'inbound', time:{ 'Franklin': '05:25', 'Back Bay': '06:17'}, bikes: 1, days: ['MONDAY', 'TUESDAY', 'WEDNESDAY', 'THURSDAY', 'FRIDAY'] },
    702   :{ direction: 'inbound', time:{ 'Franklin': '06:10', 'Back Bay': '07:05'}, bikes: 1, days: ['MONDAY', 'TUESDAY', 'WEDNESDAY', 'THURSDAY', 'FRIDAY'] },
    7704  :{ direction: 'inbound', time:{ 'Franklin': '06:57', 'Back Bay': '07:54'}, bikes: 1, days: ['MONDAY', 'TUESDAY', 'WEDNESDAY', 'THURSDAY', 'FRIDAY'] },
    7708  :{ direction: 'inbound', time:{ 'Franklin': '07:54', 'Back Bay': '08:52'}, bikes: 1, days: ['MONDAY', 'TUESDAY', 'WEDNESDAY', 'THURSDAY', 'FRIDAY'] },
    710   :{ direction: 'inbound', time:{ 'Franklin': '09:31', 'Back Bay': '10:22'}, bikes: 1, days: ['MONDAY', 'TUESDAY', 'WEDNESDAY', 'THURSDAY', 'FRIDAY'] },
    712   :{ direction: 'inbound', time:{ 'Franklin': '11:02', 'Back Bay': '11:49'}, bikes: 1, days: ['MONDAY', 'TUESDAY', 'WEDNESDAY', 'THURSDAY', 'FRIDAY'] },
    714   :{ direction: 'inbound', time:{ 'Franklin': '12:27', 'Back Bay': '13:14'}, bikes: 1, days: ['MONDAY', 'TUESDAY', 'WEDNESDAY', 'THURSDAY', 'FRIDAY'] },
    716   :{ direction: 'inbound', time:{ 'Franklin': '13:44', 'Back Bay': '14:30'}, bikes: 1, days: ['MONDAY', 'TUESDAY', 'WEDNESDAY', 'THURSDAY', 'FRIDAY'] },
    718   :{ direction: 'inbound', time:{ 'Franklin': '15:01', 'Back Bay': '16:00'}, bikes: 1, days: ['MONDAY', 'TUESDAY', 'WEDNESDAY', 'THURSDAY', 'FRIDAY'] },
    720   :{ direction: 'inbound', time:{ 'Franklin': '16:02', 'Back Bay': '16:59'}, bikes: 1, days: ['MONDAY', 'TUESDAY', 'WEDNESDAY', 'THURSDAY', 'FRIDAY'] },
    724   :{ direction: 'inbound', time:{ 'Franklin': '19:52', 'Back Bay': '20:41'}, bikes: 1, days: ['MONDAY', 'TUESDAY', 'WEDNESDAY', 'THURSDAY', 'FRIDAY'] },
    728   :{ direction: 'inbound', time:{ 'Franklin': '21:17', 'Back Bay': '20:06'}, bikes: 1, days: ['MONDAY', 'TUESDAY', 'WEDNESDAY', 'THURSDAY', 'FRIDAY'] },
    730   :{ direction: 'inbound', time:{ 'Franklin': '22:37', 'Back Bay': '23:24'}, bikes: 1, days: ['MONDAY', 'TUESDAY', 'WEDNESDAY', 'THURSDAY', 'FRIDAY'] },
    732   :{ direction: 'inbound', time:{ 'Franklin': '23:57', 'Back Bay': '24:48'}, bikes: 1, days: ['MONDAY', 'TUESDAY', 'WEDNESDAY', 'THURSDAY', 'FRIDAY'] },

    705   :{ direction: 'outbound', time:{ 'Franklin': '10:32', 'Back Bay': '09:45'}, bikes: 1, days: ['MONDAY', 'TUESDAY', 'WEDNESDAY', 'THURSDAY', 'FRIDAY'] },
    707   :{ direction: 'outbound', time:{ 'Franklin': '11:52', 'Back Bay': '11:05'}, bikes: 1, days: ['MONDAY', 'TUESDAY', 'WEDNESDAY', 'THURSDAY', 'FRIDAY'] },
    709   :{ direction: 'outbound', time:{ 'Franklin': '13:14', 'Back Bay': '12:25'}, bikes: 1, days: ['MONDAY', 'TUESDAY', 'WEDNESDAY', 'THURSDAY', 'FRIDAY'] },
    711   :{ direction: 'outbound', time:{ 'Franklin': '14:29', 'Back Bay': '13:40'}, bikes: 1, days: ['MONDAY', 'TUESDAY', 'WEDNESDAY', 'THURSDAY', 'FRIDAY'] },
    713   :{ direction: 'outbound', time:{ 'Franklin': '15:32', 'Back Bay': '14:45'}, bikes: 1, days: ['MONDAY', 'TUESDAY', 'WEDNESDAY', 'THURSDAY', 'FRIDAY'] },
    7715  :{ direction: 'outbound', time:{ 'Franklin': '16:31', 'Back Bay': '15:35'}, bikes: 1, days: ['MONDAY', 'TUESDAY', 'WEDNESDAY', 'THURSDAY', 'FRIDAY'] },
    7717  :{ direction: 'outbound', time:{ 'Franklin': '17:35', 'Back Bay': '16:40'}, bikes: 1, days: ['MONDAY', 'TUESDAY', 'WEDNESDAY', 'THURSDAY', 'FRIDAY'] },
    7721  :{ direction: 'outbound', time:{ 'Franklin': '18:32', 'Back Bay': '17:35'}, bikes: 1, days: ['MONDAY', 'TUESDAY', 'WEDNESDAY', 'THURSDAY', 'FRIDAY'] },
    7723  :{ direction: 'outbound', time:{ 'Franklin': '19:16', 'Back Bay': '18:20'}, bikes: 1, days: ['MONDAY', 'TUESDAY', 'WEDNESDAY', 'THURSDAY', 'FRIDAY'] },
    725   :{ direction: 'outbound', time:{ 'Franklin': '20:46', 'Back Bay': '19:55'}, bikes: 1, days: ['MONDAY', 'TUESDAY', 'WEDNESDAY', 'THURSDAY', 'FRIDAY'] },
    727   :{ direction: 'outbound', time:{ 'Franklin': '22:06', 'Back Bay': '21:15'}, bikes: 1, days: ['MONDAY', 'TUESDAY', 'WEDNESDAY', 'THURSDAY', 'FRIDAY'] },
    729   :{ direction: 'outbound', time:{ 'Franklin': '23:26', 'Back Bay': '22:35'}, bikes: 1, days: ['MONDAY', 'TUESDAY', 'WEDNESDAY', 'THURSDAY', 'FRIDAY'] },
    731   :{ direction: 'outbound', time:{ 'Franklin': '24:45', 'Back Bay': '23:55'}, bikes: 1, days: ['MONDAY', 'TUESDAY', 'WEDNESDAY', 'THURSDAY', 'FRIDAY'] },

    1703  :{ direction: 'outbound', time:{ 'Franklin': '08:17', 'Back Bay': '07:25'}, bikes: 1, days: ['SATURDAY'] },
    1705  :{ direction: 'outbound', time:{ 'Franklin': '10:17', 'Back Bay': '09:25'}, bikes: 1, days: ['SATURDAY'] },
    1707  :{ direction: 'outbound', time:{ 'Franklin': '12:17', 'Back Bay': '11:25'}, bikes: 1, days: ['SATURDAY'] },
    1709  :{ direction: 'outbound', time:{ 'Franklin': '14:17', 'Back Bay': '13:25'}, bikes: 1, days: ['SATURDAY'] },
    1711  :{ direction: 'outbound', time:{ 'Franklin': '16:17', 'Back Bay': '15:25'}, bikes: 1, days: ['SATURDAY'] },
    1713  :{ direction: 'outbound', time:{ 'Franklin': '18:17', 'Back Bay': '17:25'}, bikes: 1, days: ['SATURDAY'] },
    1715  :{ direction: 'outbound', time:{ 'Franklin': '20:17', 'Back Bay': '19:25'}, bikes: 1, days: ['SATURDAY'] },
    1717  :{ direction: 'outbound', time:{ 'Franklin': '22:17', 'Back Bay': '21:25'}, bikes: 1, days: ['SATURDAY'] },
    1719  :{ direction: 'outbound', time:{ 'Franklin': '24:27', 'Back Bay': '23:35'}, bikes: 1, days: ['SATURDAY'] },

    1702  :{ direction: 'inbound', time:{ 'Franklin': '06:47', 'Back Bay': '07:38'}, bikes: 1, days: ['SATURDAY'] },
    1704  :{ direction: 'inbound', time:{ 'Franklin': '08:47', 'Back Bay': '09:38'}, bikes: 1, days: ['SATURDAY'] },
    1706  :{ direction: 'inbound', time:{ 'Franklin': '10:47', 'Back Bay': '11:38'}, bikes: 1, days: ['SATURDAY'] },
    1708  :{ direction: 'inbound', time:{ 'Franklin': '12:47', 'Back Bay': '13:38'}, bikes: 1, days: ['SATURDAY'] },
    1710  :{ direction: 'inbound', time:{ 'Franklin': '14:47', 'Back Bay': '15:38'}, bikes: 1, days: ['SATURDAY'] },
    1712  :{ direction: 'inbound', time:{ 'Franklin': '16:47', 'Back Bay': '17:38'}, bikes: 1, days: ['SATURDAY'] },
    1714  :{ direction: 'inbound', time:{ 'Franklin': '18:47', 'Back Bay': '19:38'}, bikes: 1, days: ['SATURDAY'] },
    1716  :{ direction: 'inbound', time:{ 'Franklin': '20:47', 'Back Bay': '21:38'}, bikes: 1, days: ['SATURDAY'] },
    1718  :{ direction: 'inbound', time:{ 'Franklin': '22:47', 'Back Bay': '23:35'}, bikes: 1, days: ['SATURDAY'] },

    2706  :{ direction: 'inbound', time:{ 'Franklin': '10:47', 'Back Bay': '11:38'}, bikes: 1, days: ['SUNDAY'] },
    2708  :{ direction: 'inbound', time:{ 'Franklin': '12:47', 'Back Bay': '13:38'}, bikes: 1, days: ['SUNDAY'] },
    2710  :{ direction: 'inbound', time:{ 'Franklin': '14:47', 'Back Bay': '15:38'}, bikes: 1, days: ['SUNDAY'] },
    2712  :{ direction: 'inbound', time:{ 'Franklin': '16:47', 'Back Bay': '17:38'}, bikes: 1, days: ['SUNDAY'] },
    2714  :{ direction: 'inbound', time:{ 'Franklin': '18:47', 'Back Bay': '19:38'}, bikes: 1, days: ['SUNDAY'] },
    2716  :{ direction: 'inbound', time:{ 'Franklin': '20:47', 'Back Bay': '21:38'}, bikes: 1, days: ['SUNDAY'] },
    2718  :{ direction: 'inbound', time:{ 'Franklin': '22:47', 'Back Bay': '23:35'}, bikes: 1, days: ['SUNDAY'] },

    2707  :{ direction: 'outbound', time:{ 'Franklin': '12:17', 'Back Bay': '11:25'}, bikes: 1, days: ['SUNDAY'] },
    2709  :{ direction: 'outbound', time:{ 'Franklin': '14:17', 'Back Bay': '13:25'}, bikes: 1, days: ['SUNDAY'] },
    2711  :{ direction: 'outbound', time:{ 'Franklin': '16:17', 'Back Bay': '15:25'}, bikes: 1, days: ['SUNDAY'] },
    2713  :{ direction: 'outbound', time:{ 'Franklin': '18:17', 'Back Bay': '17:25'}, bikes: 1, days: ['SUNDAY'] },
    2715  :{ direction: 'outbound', time:{ 'Franklin': '20:17', 'Back Bay': '19:25'}, bikes: 1, days: ['SUNDAY'] },
    2717  :{ direction: 'outbound', time:{ 'Franklin': '22:17', 'Back Bay': '21:25'}, bikes: 1, days: ['SUNDAY'] },
    2719  :{ direction: 'outbound', time:{ 'Franklin': '24:27', 'Back Bay': '23:35'}, bikes: 1, days: ['SUNDAY'] },

}

export function getTrainsForDirection(direction, tempTrainList = trainList) {
    let matchedTrains = {};
    direction = direction.toString().toLowerCase();
    Object.entries(tempTrainList).forEach(train => {
        let theTrain = train[1];
        if((theTrain.direction).includes(direction)) {
            matchedTrains[train[0]]= train[1];
        }
    })
    return matchedTrains;
}

export function getTrainsForDay(dayOfWeek, tempTrainList = trainList) {
    let matchedTrains = {};
    dayOfWeek = dayOfWeek.toString().toUpperCase();
    Object.entries(tempTrainList).forEach(train => {
        let theTrain = train[1];
        if((theTrain.days).includes(dayOfWeek)) {
            matchedTrains[train[0]]= train[1];
        }
    })
    return matchedTrains;
}

export function getUpcomingTrains(dayOfWeek, direction, currentTime, stop) {
    let upcomingTrains = {};

    let dailyTrains = getTrainsForDay(dayOfWeek);
    let directionalTrains = getTrainsForDirection(direction, dailyTrains);

    let currentHour = currentTime.slice(0,2);
    let currentMinute = currentTime.slice(3,5);
    let currentHourMinute = currentHour.concat(currentMinute);

    Object.entries(directionalTrains).forEach(train => {
        let hourValue = train[1].time[stop].slice(0,2);
        let minuteValue = train[1].time[stop].slice(3,5);
        let hourMinuteValue = hourValue.concat(minuteValue);

        let hourCheck = parseInt(hourValue) >= parseInt(currentHour) ;
        let hourMinuteCheck = parseInt(hourMinuteValue) >= parseInt(currentHourMinute);

        if (hourCheck && hourMinuteCheck){
            upcomingTrains[train[0]] = train[1];
        }
    })

    return upcomingTrains;
}

export function getNextTrain(dayOfWeek, direction, currentTime, stop, upcomingTrains = getUpcomingTrains(dayOfWeek, direction, currentTime, stop)){
    // Note: This function returns a different format than the other functions.

    let nextTrain = null;
    Object.entries(upcomingTrains).forEach(train => {
        if (nextTrain === null){
            nextTrain = {
                train: train[0],
                ...train[1]
            };
        }
        let x = train[1].time[stop].slice(0,2);
        let y = train[1].time[stop].slice(3,5);
        let xy = x.concat(y);
        let nextTrainXY = nextTrain.time[stop].slice(0,2).concat(nextTrain.time[stop].slice(3,5));
        if (parseInt(xy) < nextTrainXY){
            nextTrain = {
                train: train[0],
                ...train[1]
            };
        }
    })
    return nextTrain;
}
